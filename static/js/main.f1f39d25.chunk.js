(this["webpackJsonpminesweeper-react"]=this["webpackJsonpminesweeper-react"]||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(6),r=n.n(c),i=(n(11),n(2)),s="ready",u="run",l="win",h="lose",o={OPENED:0,NOTHING:-1,FLAG:-2,QUESTION:-3,MINE:-4,MINE_FLAG:-5,MINE_QUESTION:-6},j=n(0);var b=function(e){var t=e.mines,n=e.leftMines,a=e.gameState,c=e.handleRestart,r=e.runtime,i=e.handleShowSet,s=function(e){switch(e){case l:return"\ud83d\ude0e";case h:return"\ud83d\ude22";default:return"\ud83d\ude04"}}(a),u=""+r;return u.length<3&&(u="0".repeat(3-u.length)+u),Object(j.jsxs)("div",{className:"info",children:[Object(j.jsxs)("div",{className:"count",children:[Object(j.jsx)("span",{children:"\ud83d\udca3"}),n,"/",t]}),Object(j.jsxs)("div",{className:"status",children:[Object(j.jsx)("button",{onClick:c,children:s}),Object(j.jsx)("button",{onClick:i,children:"\u2699\ufe0f"})]}),Object(j.jsxs)("div",{className:"time",children:[Object(j.jsx)("span",{children:"\ud83d\udd59"}),u]})]})};var O=function(e){var t=e.code,n=e.handleLeftClick,a=e.handleRightClick,c=e.state,r=function(e){var t="",n="square";switch(e){case o.NOTHING:n+="";break;case o.OPENED:n+=" plain";break;case o.FLAG:t="\ud83d\udea9",n+=" flag";break;case o.MINE_FLAG:c===h?t="\ud83d\udca5":c===l?t="\ud83d\udca3":(t="\ud83d\udea9",n+=" flag");break;case o.QUESTION:t="?",n+=" question";break;case o.MINE_QUESTION:c===h?t="\ud83d\udca5":c===l?t="\ud83d\udca3":(t="?",n+=" question");break;case o.MINE:switch(c){case h:t="\ud83d\udca5";break;case l:t="\ud83d\udca3";break;default:t=""}break;default:t=e,n+=" plain"}return[t,n]}(t),s=Object(i.a)(r,2),u=s[0],b=s[1];return Object(j.jsx)("button",{className:b,onClick:n,onContextMenu:a,children:u})};var d=function(e){var t=e.boardData,n=e.handleLeftClick,a=e.handleRightClick,c=e.gameState,r=t.length,i=t[0].length;return Object(j.jsx)("div",{className:"board",children:Array(r).fill(null).map((function(e,r){return Object(j.jsx)("div",{className:"board-row",children:Array(i).fill(null).map((function(e,i){return Object(j.jsx)(O,{code:t[r][i],handleLeftClick:function(){return n(r,i)},handleRightClick:function(e){return a(e,r,i)},state:c},i)}))},r)}))})},f=n(4),N=n(3);var m=function(e){var t=e.show,n=e.handleSet,c=Object(a.useState)({width:9,height:9,mines:10}),r=Object(i.a)(c,2),s=r[0],u=r[1],l=function(e){var t=e.target,n=t.name,a=t.value,c=parseInt(a);u((function(e){return Object(N.a)(Object(N.a)({},e),{},Object(f.a)({},n,c))})),"mines"!==n&&u((function(e){return Object(N.a)(Object(N.a)({},e),{},{mines:Math.min(s.mines,Math.floor(s.width*s.height*.8))})}))};return Object(j.jsx)(j.Fragment,{children:t&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"mask"}),Object(j.jsxs)("div",{className:"set-box",children:[Object(j.jsx)("h3",{children:"SETTING"}),Object(j.jsxs)("div",{className:"set-bd",children:[Object(j.jsxs)("label",{children:["Width: ",s.width,Object(j.jsx)("br",{})," ",Object(j.jsx)("input",{type:"range",name:"width",id:"width",min:9,max:20,onChange:function(e){return l(e)},value:s.width})]}),Object(j.jsxs)("label",{children:["Height: ",s.height,Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"range",name:"height",id:"height",min:9,max:20,onChange:function(e){return l(e)},value:s.height})]}),Object(j.jsxs)("label",{children:["Mines: ",s.mines,Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"range",name:"mines",id:"mines",min:10,max:Math.floor(s.width*s.height*.8),onChange:function(e){return l(e)},value:s.mines})]}),Object(j.jsx)("button",{onClick:function(){return n(s)},children:"SET"})]})]})]})})},x=function(e,t,n){for(var a=Array(e*t).fill().map((function(e,t){return t})),c=[],r=[];a.length>e*t-n;){var i=a.splice(Math.floor(Math.random()*a.length),1)[0];c.push(i)}for(var s=0;s<t;s++){var u=Array(e).fill(o.NOTHING);r.push(u)}for(var l=0;l<c.length;l++){var h=c[l]%e;r[Math.floor(c[l]/e)][h]=o.MINE}return r},I=function(e,t,n){var a=0;return function t(n,c){if(e[c][n]===o.NOTHING){e[c][n]=function(t,n){var a=[];return a=(a=e[n-1]?a.concat(e[n-1][t-1],e[n-1][t],e[n-1][t+1]):a).concat(e[n][t-1],e[n][t+1]),(a=e[n+1]?a.concat(e[n+1][t-1],e[n+1][t],e[n+1][t+1]):a).filter((function(e){return[o.MINE,o.MINE_FLAG,o.MINE_QUESTION].includes(e)})).length}(n,c),a++;var r=[];r=(r=e[c-1]?r.concat({x:n-1,y:c-1},{x:n,y:c-1},{x:n+1,y:c-1}):r).concat({x:n-1,y:c},{x:n+1,y:c}),r=e[c+1]?r.concat({x:n-1,y:c+1},{x:n,y:c+1},{x:n+1,y:c+1}):r,0===e[c][n]&&r.forEach((function(e){t(e.x,e.y)}))}}(t,n),{boardData:e,openedCellCount:a}};var v=function(){var e=Object(a.useState)({width:9,height:9,mines:10}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(x(9,9,10)),O=Object(i.a)(r,2),f=O[0],N=O[1],v=Object(a.useState)(0),E=Object(i.a)(v,2),g=E[0],S=E[1],M=Object(a.useState)(s),p=Object(i.a)(M,2),w=p[0],k=p[1],T=Object(a.useState)(0),C=Object(i.a)(T,2),G=C[0],y=C[1],A=Object(a.useState)(10),L=Object(i.a)(A,2),F=L[0],_=L[1],Q=Object(a.useState)(0),U=Object(i.a)(Q,2),H=U[0],R=U[1],D=Object(a.useState)(!1),q=Object(i.a)(D,2),J=q[0],P=q[1],W=function(){N(x(n.width,n.height,n.mines)),S(0),k(s),y(0),_(n.mines),R(0)};return Object(a.useEffect)((function(){var e;e=g,0===F&&e===n.width*n.height-n.mines&&(k(l),console.log("WIN!"))}),[g,F]),Object(a.useEffect)((function(){var e=null;return w===u?e=setInterval((function(){R((function(e){return e+1}))}),1e3):clearInterval(e),function(){clearInterval(e)}}),[w]),Object(a.useEffect)((function(){W()}),[n]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"box",children:Object(j.jsxs)("main",{children:[Object(j.jsx)("h1",{children:"Minesweeper Game in React"}),Object(j.jsx)(b,{mines:n.mines,leftMines:n.mines-G,gameState:w,handleRestart:W,runtime:H,handleShowSet:function(){P(!0)}}),Object(j.jsx)(d,{boardData:f,handleLeftClick:function(e,t){if(w!==l&&w!==h){w===s&&k(u);var n=f.slice();if(n[e][t]!==o.MINE){var a=I(n,t,e);S((function(e){return e+a.openedCellCount})),N(n)}else k(h)}},handleRightClick:function(e,t,n){if(e.preventDefault(),w!==l&&w!==h){w===s&&k(u);var a=f.slice();a[t][n]=function(e){switch(e){case o.NOTHING:return o.FLAG;case o.MINE:return o.MINE_FLAG;case o.FLAG:return o.QUESTION;case o.MINE_FLAG:return o.MINE_QUESTION;case o.QUESTION:return o.NOTHING;case o.MINE_QUESTION:return o.MINE;default:return e}}(a[t][n]),a[t][n]===o.MINE_FLAG||a[t][n]===o.FLAG?(y((function(e){return e+1})),a[t][n]===o.MINE_FLAG&&_((function(e){return e-1}))):a[t][n]!==o.MINE_QUESTION&&a[t][n]!==o.QUESTION||(y((function(e){return e-1})),a[t][n]===o.MINE_QUESTION&&_((function(e){return e+1}))),N(a)}},gameState:w})]})}),Object(j.jsx)(m,{show:J,handleSet:function(e){P(!1),c(e)}})]})};r.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.f1f39d25.chunk.js.map